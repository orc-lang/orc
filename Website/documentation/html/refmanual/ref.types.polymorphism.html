<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>9.2.&nbsp;Parametric Polymorphism</title><meta content="DocBook XSL-NS Stylesheets V1.76.1" name="generator"><link rel="home" href="index.html" title="Orc Reference Manual v2.1.1"><link rel="up" href="ref.types.html" title="Chapter&nbsp;9.&nbsp;Type System"><link rel="prev" href="ref.types.metatheory.html" title="9.1.&nbsp;Metatheory"><link rel="next" href="ref.types.subtyping.html" title="9.3.&nbsp;Subtyping"><link rel="copyright" href="legalnotice.html" title="License and Grant Information"><link xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" type="text/css" rel="stylesheet" href="/orchard/orc.css"><link xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" href="style.css" type="text/css" rel="stylesheet"><script xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" type="text/javascript">
// Expandable content script from flooble.com.
// For more information please visit:
// http://www.flooble.com/scripts/expand.php
// Copyright 2002 Animus Pactum Consulting Inc.
//----------------------------------------------
function toggle(link, divId) {
	var lText = link.innerHTML;
	var d = document.getElementById(divId);
	if (lText == '+') {
		link.innerHTML = '&#8722;';
		d.style.display = 'block';
	} else {
		link.innerHTML = '+';
		d.style.display = 'none';
	}
}
</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Table of Contents"></a></th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ref.types.metatheory.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th align="center" width="60%"><a accesskey="u" href="ref.types.html">Chapter&nbsp;9.&nbsp;Type System</a></th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ref.types.subtyping.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td align="left" width="20%"><a href="ref.types.metatheory.html">9.1.&nbsp;Metatheory</a>&nbsp;</td><th align="center" width="60%">9.2.&nbsp;Parametric Polymorphism</th><td align="right" width="20%"><a href="ref.types.subtyping.html">9.3.&nbsp;Subtyping</a>&nbsp;</td></tr></table></div><div class="section" title="9.2.&nbsp;Parametric Polymorphism"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ref.types.polymorphism"></a>9.2.&nbsp;Parametric Polymorphism</h2></div></div></div><p>
	The Orc type system supports <a name="N4310D" class="indexterm"></a><em class="firstterm">parametric polymorphism</em>: functions,
	sites, and types may accept type parameters. This is the same theory that 
	underlies Java's generics.
	</p><p>
	Parametric polymorphism occurs in three contexts: the <a class="link" href="ref.declarations.type.html" title="4.6.&nbsp;type: Declare Type">declaration</a> of a parametric type, the <a class="link" href="ref.declarations.def.html" title="4.2.&nbsp;def: Define Function">definition</a> of a
	polymorphic function, or a <a class="link" href="ref.expressions.call.html" title="2.4.&nbsp;Site and Function Calls">call</a> to a polymorphic function or site.
	</p><div class="section" title="9.2.1.&nbsp;Parametric types"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.types"></a>9.2.1.&nbsp;Parametric types</h3></div></div></div><p>
	    </p><table cellpadding="5" width="100%" class="productionset" summary="EBNF"><tr><td><table cellpadding="0" width="99%" border="0" class="productionset" summary="EBNF productions"><tr><td width="3%" valign="top" align="left">[50]</td><td width="10%" valign="top" align="right"><a href="ref.syntax.EBNF.html#ebnf.type.application"><a class="link" href="ref.types.polymorphism.html#ref.types.polymorphism.types" title="9.2.1.&nbsp;Parametric types">TypeApplication</a></a></td><td align="center" width="5%" valign="top"><code>::=</code></td><td width="52%" valign="top">
		    <a href="ref.syntax.EBNF.html#ebnf.type">Type</a> <a href="ref.syntax.EBNF.html#ebnf.typearguments">TypeArguments</a>
		  </td><td width="30%" valign="top" align="left">&nbsp;</td></tr></table></td></tr></table><p>
	  </p><p>
			Orc has a special form of type, called a <a name="N43130" class="indexterm"></a><em class="firstterm">type application</em>, which
			applies a type operator to a sequence of type arguments. This permits the instantiation
			of multiple variations of the same type. The simplest example of this feature is the
			<a class="link" href="ref.data.list.html#ref.data.list.type" title="1.5.4.&nbsp;Type"><code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">List</span></code></a> type operator. For example, the list value <code class="code">[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">1</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">2</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">3</span>]</code> has the type <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Integer</span>]</code>,
			whereas the list value <code class="code">[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">true</span>, <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">false</span>]</code> has the type <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Boolean</span>]</code>. 
		</p><p>
			Lists are not the only parametric type. The <a class="link" href="ref.stdlib.html" title="Chapter&nbsp;11.&nbsp;Standard Library">standard library</a> includes other parametric types, such as
			<code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Option</span></code>, <a class="link" href="ref.stdlib.state.html#ref.stdlib.state.Channel"><code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Channel</span></code></a>, and <a class="link" href="ref.stdlib.state.html#ref.stdlib.state.Cell"><code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Cell</span></code></a>. 
			A <a class="link" href="ref.declarations.type.html#ref.declarations.type.alias" title="4.6.2.&nbsp;Type Alias">type alias</a> may have type parameters, thus defining a parametric type. 
			Similarly, a <a class="link" href="ref.declarations.type.html#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">datatype declaration</a> may also have type parameters.
		</p></div><div class="section" title="9.2.2.&nbsp;Parametric functions"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.functions"></a>9.2.2.&nbsp;Parametric functions</h3></div></div></div><p>
			A function may be polymorphic, taking one or more type parameters. Such functions can be
			operate generically over different types.
			Consider the following definition of the <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">append</span></code> function, which appends two lists:
			
			</p><pre class="programlisting">
<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-keyword">def</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">T</span>](<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">T</span>], <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">T</span>]) <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">T</span>]
<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-keyword">def</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>([], <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">l</span>) <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">=</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">l</span>
<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-keyword">def</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>(<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">h</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">t</span>, <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">l</span>) <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">=</span> <span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">h</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-operator">:</span><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>(<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">t</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">l</span>)
</pre><p>
			
			The function <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">append</span></code> has a type parameter <em class="replaceable"><code>T</code></em> in its signature. 
			The type <em class="replaceable"><code>T</code></em> is the type of the elements in the lists being appended.
			Notice that both argument lists must contain the same type of elements. 
			The resulting list contains elements of that same type.
		</p></div><div class="section" title="9.2.3.&nbsp;Polymorphic calls"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.calls"></a>9.2.3.&nbsp;Polymorphic calls</h3></div></div></div><p>
			When calling the <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">append</span></code> function, in addition to providing its normal arguments, we must
			also provide its type argument:
			
			</p><pre class="programlisting">
<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Integer</span>]([<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">1</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">2</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">3</span>], [<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">4</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">5</span>])
</pre><p>
			
			However, it would be very burdensome and verbose to provide type arguments to all such calls. Fortunately,
			in most cases, the type checker can infer the correct type arguments, in the same way that it infers
			the correct type for many expressions without any additional information. So in this case, we can
			simply write:
			
			</p><pre class="programlisting">
<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">append</span>([<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">1</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">2</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">3</span>], [<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">4</span>,<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-literal">5</span>])
</pre><p>
			
			and the typechecker infers that the parameter <em class="replaceable"><code>T</code></em> is <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Integer</span></code>, since both argument lists are
			of type <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">List</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Integer</span>]</code>. For a more thorough explanation of how this inference occurs, please
			refer to <a class="link" href="ref.types.metatheory.html#ref.types.metatheory.origin">the typing algorithm</a> on which the Orc typechecker is based.
			</p><p>
			Inference of type arguments will always fail on certain kinds of calls, because the typechecker does
			not have enough information to infer the correct type. The most common case is a site call which
			constructs a parametric type without taking any arguments. For example, the call <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">Channel</span>()</code>
			will never typecheck, since there is no way for the typechecker to know what type of elements the
			channel should contain. In other languages such as ML, the typechecker might be able to infer this information
			from the rest of the program, but Orc's typechecker is based on <span class="emphasis"><em>local</em></span> type inference,
			which must find the information locally, such as from the types of the arguments. So, to construct
			a channel that will contain <a class="link" href="ref.data.numeric.html#ref.data.numeric.type" title="1.2.4.&nbsp;Type">numbers</a>, a type argument must be given: <code class="code"><span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-site">Channel</span>[<span xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" class="hl-variable">Number</span>]()</code>.		
			</p></div><div class="section" title="9.2.4.&nbsp;Related Links"><div class="titlepage"><div><div><h3 class="title"><a name="ref.types.polymorphism.links"></a>9.2.4.&nbsp;Related Links</h3></div></div></div><div class="itemizedlist" title="Related Reference Topics"><p class="title"><b>Related Reference Topics</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="ref.types.metatheory.html" title="9.1.&nbsp;Metatheory">Type System Metatheory</a></p></li><li class="listitem"><p><a class="link" href="ref.types.subtyping.html#ref.types.subtyping.variance" title="9.3.5.&nbsp;Variance">Variance</a></p></li><li class="listitem"><p><a class="link" href="ref.expressions.call.html" title="2.4.&nbsp;Site and Function Calls">Site and Function Calls</a></p></li><li class="listitem"><p><a class="link" href="ref.types.typeinfo.html#ref.types.typeinfo.function" title="9.4.2.&nbsp;Function Type Information">Adding Type Information to Functions</a></p></li><li class="listitem"><p><a class="link" href="ref.declarations.type.html#ref.declarations.type.datatype" title="4.6.4.&nbsp;Datatype">Datatype Declaration</a></p></li></ul></div><div class="itemizedlist" title="Related Tutorial Sections"><p class="title"><b>Related Tutorial Sections</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="../userguide/userguide.html#ug.additional.typecheck" class="olink">Type Checking</a></p></li></ul></div></div></div><script xmlns:od="http://orc.csres.utexas.edu/OrcDocBook.xsd" xmlns:db="http://docbook.org/ns/docbook" type="text/javascript" src="/orchard/orc.js"></script></body></html>